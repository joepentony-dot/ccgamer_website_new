<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Details | Cheeky Commodore Gamer</title>

    <!-- Global CCG Theme -->
    <link rel="stylesheet" href="../resources/css/main.css">
</head>
<body>

<div class="ccg-page">
<div class="ccg-page-inner ccg-crt-glow">

    <header class="ccg-header">
        <h1 id="game-title">Loading...</h1>
        <p class="ccg-header-subtitle">Game details & retro info.</p>
    </header>

    <div id="game-container" class="ccg-game-layout">

        <!-- Thumbnail -->
        <div class="ccg-game-thumb">
            <img id="game-thumbnail" src="" alt="Game Thumbnail">
        </div>

        <!-- Details -->
        <div class="ccg-game-info">

            <div class="ccg-info-block">
                <h2>Game Information</h2>
                <ul>
                    <li><strong>Year:</strong> <span id="game-year"></span></li>
                    <li><strong>Developer:</strong> <span id="game-developer"></span></li>
                    <li><strong>Composer:</strong> <span id="game-composer"></span></li>
                    <li><strong>Genres:</strong> <span id="game-genres"></span></li>
                </ul>
            </div>

            <div class="ccg-info-block">
                <h2>External Links</h2>
                <ul>
                    <li><a id="link-lemon64" href="#" target="_blank">Lemon64 Page</a></li>
                    <li><a id="link-lemonamiga" href="#" target="_blank">LemonAmiga Page</a></li>
                    <li><a id="link-pdf" href="#" target="_blank">Manual / PDF</a></li>
                    <li><a id="link-download" href="#" target="_blank">Game Download</a></li>
                    <li><a id="link-video" href="#" target="_blank">YouTube Gameplay</a></li>
                </ul>
            </div>

        </div>

    </div>

    <div class="ccg-back">
        <a href="index.html" class="ccg-btn-secondary">⬅ Back to Game Menu</a>
        <a href="../index.html" class="ccg-btn-secondary">⬅ Back to Main Menu</a>
    </div>

    <footer class="ccg-footer">
        Cheeky Commodore Gamer – Explore the classics in neon style
    </footer>

</div>
</div>

<script>
// Utility: get ?id= value
function getGameId() {
    const params = new URLSearchParams(window.location.search);
    return params.get("id");
}

async function loadGame() {
    const gameId = getGameId();

    if (!gameId) {
        document.getElementById("game-title").textContent = "Game Not Found";
        return;
    }

    try {
        const response = await fetch("games.json");
        const games = await response.json();

        const game = games.find(g => g.id == gameId);

        if (!game) {
            document.getElementById("game-title").textContent = "Game Not Found";
            return;
        }

        // Fill main fields
        document.getElementById("game-title").textContent = game.title;
        document.getElementById("game-year").textContent = game.year || "Unknown";
        document.getElementById("game-developer").textContent = game.developer || "Unknown";
        document.getElementById("game-composer").textContent = game.composer || "Unknown";
        document.getElementById("game-genres").textContent = game.genres ? game.genres.join(", ") : "Unknown";

        // Thumbnail
        document.getElementById("game-thumbnail").src = "../" + game.thumbnail;

        // Links
        document.getElementById("link-lemon64").href = game.lemon64 || "#";
        document.getElementById("link-lemonamiga").href = game.lemonamiga || "#";
        document.getElementById("link-pdf").href = game.pdf || "#";
        document.getElementById("link-download").href = game.download || "#";
        document.getElementById("link-video").href = game.video || "#";

    } catch (err) {
        document.getElementById("game-title").textContent = "Error Loading Game";
    }
}

loadGame();
</script>

</body>
</html>
