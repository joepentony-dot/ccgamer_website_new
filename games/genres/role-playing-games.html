<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Role Playing Games | Cheeky Commodore Gamer</title>

    <link rel="stylesheet" href="../../resources/css/main.css">
</head>
<body>

<div class="ccg-page">
    <div class="ccg-page-inner ccg-crt-glow">

        <header class="ccg-header">
            <h1>Role Playing Games</h1>
            <p class="ccg-header-subtitle">Stats, quests, exploration and rich 8-bit lore.</p>
        </header>

        <div id="results" class="ccg-grid"></div>

        <div class="ccg-back">
            <a href="../index.html" class="ccg-btn-secondary">⬅ Back to Game Menu</a>
        </div>

        <footer class="ccg-footer">
            Cheeky Commodore Gamer – Choose your class, begin your quest
        </footer>

    </div>
</div>

<script>
async function loadGenre() {
    const container = document.getElementById("results");

    try {
        const response = await fetch("../games.json");
        const games = await response.json();

        const filtered = games.filter(g =>
            Array.isArray(g.genres) && g.genres.includes("Role Playing Games")
        );

        filtered.sort((a, b) => a.title.localeCompare(b.title));

        if (!filtered.length) {
            container.innerHTML = "<p>No games found in this genre.</p>";
            return;
        }

        container.innerHTML = filtered.map(g => `
            <div class="game-card">
                <a href="../game.html?id=${g.id}">
                    <img src="../../${g.thumbnail}" alt="${g.title}">
                </a>
                <a href="../game.html?id=${g.id}">${g.title}</a>
                <div class="meta">${g.year || ""}</div>
            </div>
        `).join("");

    } catch {
        container.innerHTML = "<p>Error loading Role Playing Games.</p>";
    }
}

loadGenre();
</script>

</body>
</html>
