<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Arcade Games | Cheeky Commodore Gamer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        body { background:#000; color:#cceeff; font-family: monospace; }
        h1 { padding:20px; }

        .game-grid {
            display:grid;
            grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
            gap:18px;
            padding:20px;
        }

        .game-card {
            background:#001;
            border:1px solid #224;
            padding:10px;
            border-radius:6px;
            position:relative;
        }

        .game-card img {
            width:100%;
            aspect-ratio:16/9;
            object-fit:cover;
            border-radius:4px;
        }

        .play-icon {
            position:absolute;
            bottom:12px;
            right:12px;
            background:rgba(0,0,0,0.6);
            padding:6px 8px;
            border-radius:4px;
            border:1px solid #88d;
            font-size:18px;
        }

        .game-title {
            margin-top:8px;
            font-size:1rem;
            color:#ffea99;
        }
    </style>
</head>

<body>

<h1>Arcade Games</h1>
<div id="gameGrid" class="game-grid"></div>

<script>
const TARGET_GENRE = "Arcade Games"; // EXACT match from games.json

fetch("../games.json")  // <-- CORRECT PATH
    .then(res => res.json())
    .then(games => {

        const grid = document.getElementById("gameGrid");
        grid.innerHTML = "";

        // Some entries use "genre", some use "genres"
        const matches = games.filter(g => {
            const genres = g.genre || g.genres || [];
            return Array.isArray(genres) && genres.includes(TARGET_GENRE);
        });

        // Debug output
        console.log("Loaded games:", games.length);
        console.log("Arcade matches:", matches.length);

        matches.sort((a, b) =>
            (a.sorttitle || a.title).localeCompare(b.sorttitle || b.title)
        );

        matches.forEach(game => {
            const card = document.createElement("div");
            card.className = "game-card";

            const link = document.createElement("a");
            link.href = "../game.html?id=" + encodeURIComponent(game.gameid || game.id);

            const img = document.createElement("img");
            img.src = "../" + game.thumbnail;

            const play = document.createElement("div");
            play.className = "play-icon";
            play.textContent = "â–¶";

            link.appendChild(img);
            card.appendChild(link);
            card.appendChild(play);

            const label = document.createElement("div");
            label.className = "game-title";
            label.textContent = game.title;

            card.appendChild(label);
            grid.appendChild(card);
        });
    })
    .catch(err => {
        console.error("Error loading Arcade Games:", err);
    });
</script>

</body>
</html>
