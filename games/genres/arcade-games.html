<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arcade Games | Cheeky Commodore Gamer</title>

    <link rel="stylesheet" href="../resources/css/main.css">
    <link rel="stylesheet" href="../resources/css/genre.css">

    <style>
        .game-item {
            position: relative;
            display: inline-block;
            margin: 10px;
        }

        .game-item img {
            width: 260px;
            height: 160px;
            object-fit: cover;
            border-radius: 6px;
        }

        .video-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 55px;
            height: 55px;
            background: rgba(0,0,0,0.45);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .video-overlay::before {
            content: "";
            border-style: solid;
            border-width: 12px 0 12px 20px;
            border-color: transparent transparent transparent white;
            margin-left: 4px;
        }

        #backTop, #backMenu {
            margin: 20px;
            display: inline-block;
            padding: 8px 14px;
            background: #0af;
            color: #000;
            border-radius: 5px;
            text-decoration: none;
        }
    </style>
</head>

<body>

    <header class="genre-header">
        <h1>Arcade Games</h1>
    </header>

    <div id="game-list"></div>

    <a id="backTop" href="#">Return to Top</a>
    <a id="backMenu" href="../index.html">Return to Main Menu</a>

    <script>
        const TARGET_GENRE = "Arcade Games";  // EXACT MATCH REQUIRED

        async function loadGenreList() {
            try {
                const response = await fetch("../games/games.json");
                const games = await response.json();

                const container = document.getElementById("game-list");
                container.innerHTML = "";

                const filtered = games.filter(g =>
                    Array.isArray(g.genre) && g.genre.includes(TARGET_GENRE)
                );

                if (filtered.length === 0) {
                    container.innerHTML = "<p>No games found for this genre.</p>";
                    return;
                }

                filtered.sort((a, b) => a.sorttitle.localeCompare(b.sorttitle));

                filtered.forEach(game => {
                    const item = document.createElement("div");
                    item.classList.add("game-item");

                    const link = document.createElement("a");
                    link.href = `../games/game.html?id=${game.id}`;

                    const img = document.createElement("img");
                    img.src = `../${game.thumbnail}`;

                    const overlay = document.createElement("div");
                    overlay.classList.add("video-overlay");

                    link.appendChild(img);
                    link.appendChild(overlay);
                    item.appendChild(link);

                    const label = document.createElement("p");
                    label.textContent = game.title;
                    item.appendChild(label);

                    container.appendChild(item);
                });

            } catch (err) {
                console.error("Error loading genre:", err);
            }
        }

        loadGenreList();
    </script>

</body>
</html>
