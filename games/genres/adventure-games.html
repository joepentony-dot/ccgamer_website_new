<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Adventure Games | Cheeky Commodore Gamer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- From /games/genres/ we go up two levels to reach shared CSS & JS -->
    <link rel="stylesheet" href="../../css/engine.css">
    <link rel="stylesheet" href="../../resources/main.css">

    <style>
        /* FUNCTIONAL FIRST â€” POLISH LATER */

        body {
            margin: 0;
            background: #000;
            color: #f4f4f4;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        .ccg-shell {
            max-width: 1100px;
            margin: 0 auto;
            padding: 16px;
        }

        header.ccg-header {
            border-bottom: 2px solid #333;
            padding: 10px 0 16px 0;
        }

        .ccg-header h1 {
            margin: 0;
            font-size: 1.6rem;
        }

        nav.ccg-nav {
            margin-top: 10px;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        nav.ccg-nav a {
            color: #7fd0ff;
            text-decoration: none;
            padding: 4px 8px;
            border-radius: 4px;
        }

        nav.ccg-nav a:hover {
            background: #07111f;
            border: 1px solid #7fd0ff;
        }

        h2 {
            margin-top: 18px;
            font-size: 1.3rem;
        }

        .games-grid {
            margin-top: 16px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 14px;
        }

        .game-card {
            background: #050915;
            border: 1px solid #333;
            border-radius: 6px;
            padding: 10px;
        }

        .game-thumb {
            width: 100%;
            height: auto;
            border-radius: 4px;
        }

        .game-title {
            font-size: 1rem;
            margin: 10px 0 4px 0;
        }

        .game-meta {
            font-size: 0.85rem;
            opacity: 0.8;
        }

        .game-links a {
            display: inline-block;
            margin-top: 6px;
            font-size: 0.85rem;
            color: #7fd0ff;
            text-decoration: none;
        }

        .game-links a:hover {
            text-decoration: underline;
        }
    </style>

    <!-- Game loader -->
    <script defer src="../../js/load-games.js"></script>
</head>
<body>

<div class="ccg-shell">

    <header class="ccg-header">
        <h1>Adventure Games</h1>
        <nav class="ccg-nav">
            <a href="../../index.html">Home</a>
            <a href="../index.html">Game Browser</a>
            <a href="../complete-index.html">Full Index</a>
        </nav>
    </header>

    <h2>Games in This Genre</h2>

    <div id="games-container" class="games-grid">
        <!-- Populated dynamically -->
    </div>

</div>

<script>
/* ===============================
   Adventure Games Page Loader
   =============================== */

async function loadAdventureGames() {
    try {
        const games = await ccgFetchGames();  // from load-games.js

        // Filter for the correct genre
        const filtered = games.filter(g =>
            g.genre &&
            g.genre.toLowerCase().includes("adventure")
        );

        const container = document.getElementById("games-container");
        container.innerHTML = "";

        if (filtered.length === 0) {
            container.innerHTML = "<p>No games found in this genre.</p>";
            return;
        }

        filtered.forEach(game => {
            const card = document.createElement("div");
            card.className = "game-card";

            card.innerHTML = `
                <img src="${game.thumbnail}" class="game-thumb" alt="${game.title}">
                <div class="game-title">${game.title}</div>
                <div class="game-meta">
                    ${game.year ? "Year: " + game.year : ""}
                    ${game.publisher ? "<br>Publisher: " + game.publisher : ""}
                    ${game.composer ? "<br>Composer: " + game.composer : ""}
                </div>
                <div class="game-links">
                    ${game.video ? `<a href="${game.video}" target="_blank">Watch Video</a><br>` : ""}
                    ${game.lemon ? `<a href="${game.lemon}" target="_blank">Lemon64</a><br>` : ""}
                    ${game.manual ? `<a href="${game.manual}" target="_blank">Manual (PDF)</a><br>` : ""}
                    ${game.disk ? `<a href="${game.disk}" target="_blank">Download Disk</a><br>` : ""}
                </div>
            `;

            container.appendChild(card);
        });

    } catch (err) {
        document.getElementById("games-container").innerHTML =
            "<p>Error loading games.</p>";
        console.error(err);
    }
}

document.addEventListener("DOMContentLoaded", loadAdventureGames);
</script>

</body>
</html>
