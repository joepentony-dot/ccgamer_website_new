<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C64 Cartridge Games | CCG</title>

    <link rel="stylesheet" href="../../css/engine.css">
    <link rel="stylesheet" href="../../resources/main.css">

    <style>
        body { background:#000; color:#b8e4ff; font-family:"VT323", monospace; padding:20px; }
        .container { max-width:1100px; margin:auto; }
        h1 { font-size:50px; color:#6fc3ff; margin-bottom:10px; }
        .game-list { display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:22px; margin-top:25px; }
        .game { background:#031c2d; border:2px solid #6fc3ff; border-radius:6px; padding:12px; text-align:center; }
        .game img { width:100%; border-radius:6px; border:2px solid #6fc3ff; margin-bottom:10px; }
        .game a { color:#a0d8ff; font-size:22px; display:block; margin-bottom:6px; text-decoration:none; }
        .meta { color:#85c6ff; font-size:20px; }
        .back-button { display:inline-block; padding:12px 20px; background:#073763; border:2px solid #6fc3ff;
                       color:#b8e4ff; font-size:24px; border-radius:6px; margin-top:35px; text-decoration:none; }
    </style>
</head>

<body>
<div class="container">
    <h1>C64 Cartridge Games</h1>
    <p>A curated list of Commodore 64 games released on cartridge format.</p>

    <div id="results" class="game-list"></div>

    <a href="../index.html" class="back-button">â¬… Back to Game Menu</a>
</div>

<script>
const TAG = "Cartridge Games";

async function loadCollection() {
    const container = document.getElementById("results");

    try {
        const response = await fetch("../games.json");
        const games = await response.json();

        const filtered = games
            .filter(g => Array.isArray(g.genre) && g.genre.includes(TAG))
            .sort((a,b) => a.title.localeCompare(b.title));

        if (!filtered.length) {
            container.innerHTML = "<p>No cartridge games found.</p>";
            return;
        }

        container.innerHTML = filtered.map(g => `
            <div class="game">
                <a href="../game.html?id=${g.id}">
                    <img src="../../${g.thumbnail}" alt="${g.title}">
                </a>
                <a href="../game.html?id=${g.id}">${g.title}</a>
                <div class="meta">${g.year ?? ""}</div>
            </div>
        `).join("");
    } catch {
        container.innerHTML = "<p>Error loading collection.</p>";
    }
}

loadCollection();
</script>
</body>
</html>
